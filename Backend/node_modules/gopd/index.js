'use strict';

// case-sensitivity fix for Linux (Windows to Render deployment)
var $gOPD;
try {
  $gOPD = require('./gOPD');
} catch (e) {
  // Fallback: try to find file with any case
  try {
    const fs = require('fs');
    const path = require('path');
    const dir = __dirname;
    const files = fs.readdirSync(dir);
    const gopdFile = files.find(f => f.toLowerCase() === 'gopd.js');
    if (gopdFile) {
      $gOPD = require(path.join(dir, gopdFile));
    } else {
      // Last resort: use Object.getOwnPropertyDescriptor directly
      $gOPD = Object.getOwnPropertyDescriptor;
    }
  } catch (e2) {
    // Final fallback
    $gOPD = Object.getOwnPropertyDescriptor;
  }
}

if ($gOPD) {
  try {
    $gOPD([], 'length');
  } catch (e) {
    // IE 8 has a broken gOPD
    $gOPD = null;
  }
}

module.exports = $gOPD;
