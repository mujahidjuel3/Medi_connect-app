'use strict';

/** @type {import('.')} */
// case-sensitivity fix for Linux
var $gOPD;
try {
  $gOPD = require('./gOPD');
} catch (e) {
  // Fallback: try to find file with any case
  const fs = require('fs');
  const files = fs.readdirSync(__dirname);
  const gopdFile = files.find(f => f.toLowerCase() === 'gopd.js');
  if (gopdFile) {
    $gOPD = require('./' + gopdFile);
  } else {
    throw e;
  }
}

if ($gOPD) {
	try {
		$gOPD([], 'length');
	} catch (e) {
		// IE 8 has a broken gOPD
		$gOPD = null;
	}
}

module.exports = $gOPD;
